
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>database: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">blog-apis/database/db.go (0.0%)</option>
				
				<option value="file1">blog-apis/database/scema.go (0.0%)</option>
				
				<option value="file2">blog-apis/docs/docs.go (0.0%)</option>
				
				<option value="file3">blog-apis/handler/handler.go (90.9%)</option>
				
				<option value="file4">blog-apis/main.go (0.0%)</option>
				
				<option value="file5">blog-apis/repository/mocks/mocks.go (0.0%)</option>
				
				<option value="file6">blog-apis/repository/repository.go (0.0%)</option>
				
				<option value="file7">blog-apis/routes/routes.go (0.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package database

import (
        "blog-apis/models"
        "database/sql"
        "fmt"
        "log"

        _ "github.com/lib/pq"
)

func DBConnection(config models.Config) (*sql.DB, error) <span class="cov0" title="0">{
        dsn := fmt.Sprintf("postgres://%s:%s@%s:%s/%s?sslmode=disable",
                config.DBUser, config.DBPassword, config.DBHost, config.DBPort, config.Database)

        db, err := sql.Open("postgres", dsn)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error connecting to the database: %v", err)
                return nil, err
        }</span>

        <span class="cov0" title="0">if err = DBHealth(db); err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error pinging the database: %v", err)
                return nil, err
        }</span>

        <span class="cov0" title="0">return db, nil</span>
}

func CloseDB(db *sql.DB) <span class="cov0" title="0">{
        if err := db.Close(); err != nil </span><span class="cov0" title="0">{
                log.Printf("Error closing the database connection: %v", err)
        }</span>
}
func DBHealth(db *sql.DB) error <span class="cov0" title="0">{
        if err := db.Ping(); err != nil </span><span class="cov0" title="0">{
                log.Printf("Database health check failed: %v", err)
                return err
        }</span>
        <span class="cov0" title="0">log.Println("Database is healthy.")
        return nil</span>
}
</pre>
		
		<pre class="file" id="file1" style="display: none">package database

import "database/sql"

const (
        blogSchema = `
        DROP TABLE IF EXISTS blog_posts;
        CREATE TABLE IF NOT EXISTS blog_posts (
                id UUID PRIMARY KEY,
                title TEXT NOT NULL,
                body TEXT NOT NULL,
                description TEXT NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );`
)

func DatabaseSchema(db *sql.DB) error <span class="cov0" title="0">{
        _, err := db.Exec(blogSchema)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file2" style="display: none">// Package docs Code generated by swaggo/swag. DO NOT EDIT
package docs

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "email": "fiber@swagger.io"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/posts": {
            "get": {
                "description": "Retrieves all blog posts",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Public"
                ],
                "summary": "Get all blog posts",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.BlogPost"
                            }
                        }
                    },
                    "500": {
                        "description": "{\\\"error\\\": \\\"Internal server error\\\"}"
                    }
                }
            },
            "post": {
                "description": "Creates a new blog post with the provided details",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Public"
                ],
                "summary": "Create a new blog post",
                "parameters": [
                    {
                        "description": "Blog post details",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.BlogPost"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "{\\\"error\\\": \\\"Bad request\\\"}"
                    },
                    "500": {
                        "description": "{\\\"error\\\": \\\"Internal server error\\\"}"
                    }
                }
            }
        },
        "/posts/{id}": {
            "get": {
                "description": "Retrieves a blog post by its ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Public"
                ],
                "summary": "Get a blog post by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Post ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.BlogPost"
                        }
                    },
                    "400": {
                        "description": "{\\\"error\\\": \\\"Post ID is required\\\"}"
                    },
                    "404": {
                        "description": "{\\\"error\\\": \\\"Post not found\\\"}"
                    },
                    "500": {
                        "description": "{\\\"error\\\": \\\"Internal server error\\\"}"
                    }
                }
            },
            "put": {
                "description": "Updates a blog post with the provided details",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Public"
                ],
                "summary": "Update a blog post by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Post ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Blog post details",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.BlogPost"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{\\\"message\\\": \\\"post updated successfully\\\", \\\"postID\\\": \\\"\u003cid\u003e\\\"}"
                    },
                    "400": {
                        "description": "{\\\"error\\\": \\\"Post ID is required\\\"}"
                    },
                    "404": {
                        "description": "{\\\"error\\\": \\\"Post not found\\\"}"
                    },
                    "500": {
                        "description": "{\\\"error\\\": \\\"Internal server error\\\"}"
                    }
                }
            },
            "delete": {
                "description": "Deletes a blog post by its ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Public"
                ],
                "summary": "Delete a blog post by ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Post ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "{\\\"message\\\": \\\"post deleted successfully\\\", \\\"postID\\\": \\\"\u003cid\u003e\\\"}"
                    },
                    "400": {
                        "description": "{\\\"error\\\": \\\"Post ID is required\\\"}"
                    },
                    "404": {
                        "description": "{\\\"error\\\": \\\"Post not found\\\"}"
                    },
                    "500": {
                        "description": "{\\\"error\\\": \\\"Internal server error\\\"}"
                    }
                }
            }
        }
    },
    "definitions": {
        "models.BlogPost": {
            "type": "object",
            "properties": {
                "body": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &amp;swag.Spec{
        Version:          "1.0",
        Host:             "127.0.0.1:8080",
        BasePath:         "/api/v1",
        Schemes:          []string{},
        Title:            "Fiber Example API",
        Description:      "This is a sample swagger for Fiber",
        InfoInstanceName: "swagger",
        SwaggerTemplate:  docTemplate,
        LeftDelim:        "{{",
        RightDelim:       "}}",
}

func init() <span class="cov0" title="0">{
        swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}</span>
</pre>
		
		<pre class="file" id="file3" style="display: none">package handler

import (
        "blog-apis/models"
        "blog-apis/repository"

        "github.com/gofiber/fiber/v2"
)

type Handler struct {
        repo repository.Repository
}

func NewHandler(repo repository.Repository) *Handler <span class="cov8" title="1">{
        return &amp;Handler{repo: repo}
}</span>

// CreatePost creates a new blog post
// @Summary Create a new blog post
// @Description Creates a new blog post with the provided details
// @Tags Public
// @Accept json
// @Produce json
// @Param user body models.BlogPost true "Blog post details"
// @Success 200
// @Failure 400 "{\"error\": \"Bad request\"}"
// @Failure 500 "{\"error\": \"Internal server error\"}"
// @Router /posts [post]
func (h *Handler) CreatePost(c *fiber.Ctx) error <span class="cov8" title="1">{
        var reqBody models.BlogPost
        if err := c.BodyParser(&amp;reqBody); err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{"error": "Invalid request body"})
        }</span>
        <span class="cov8" title="1">if err := h.repo.CreatePost(c, &amp;reqBody); err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(fiber.Map{"error": "Failed to create post"})
        }</span>
        <span class="cov8" title="1">return c.Status(fiber.StatusOK).JSON(fiber.Map{"message": "post created successfully", "post": reqBody})</span>
}

// GetPost retrieves a blog post by ID
// @Summary Get a blog post by ID
// @Description Retrieves a blog post by its ID
// @Tags Public
// @Accept json
// @Produce json
// @Param id path string true "Post ID"
// @Success 200 {object} models.BlogPost
// @Failure 400 "{\"error\": \"Post ID is required\"}"
// @Failure 500 "{\"error\": \"Internal server error\"}"
// @Router /posts/{id} [get]
func (h *Handler) GetPost(c *fiber.Ctx) error <span class="cov8" title="1">{
        id := c.Params("id")
        if id == "" || len(id) != 36 </span><span class="cov0" title="0">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{"error": "Post ID is required"})
        }</span>
        <span class="cov8" title="1">post, err := h.repo.GetPost(c, id)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(fiber.Map{"error": err.Error()})
        }</span>
        <span class="cov8" title="1">return c.Status(fiber.StatusOK).JSON(fiber.Map{"post": post})</span>
}

// GetPosts retrieves all blog posts
// @Summary Get all blog posts
// @Description Retrieves all blog posts
// @Tags Public
// @Accept json
// @Produce json
// @Success 200 {array} models.BlogPost
// @Failure 500 "{\"error\": \"Internal server error\"}"
// @Router /posts [get]
func (h *Handler) GetPosts(c *fiber.Ctx) error <span class="cov8" title="1">{
        posts, err := h.repo.GetBlogPosts(c)
        if err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(fiber.Map{"error": err.Error()})
        }</span>
        <span class="cov8" title="1">return c.Status(fiber.StatusOK).JSON(fiber.Map{"posts": posts})</span>
}

// UpdatePost updates a blog post by ID
// @Summary Update a blog post by ID
// @Description Updates a blog post with the provided details
// @Tags Public
// @Accept json
// @Produce json
// @Param id path string true "Post ID"
// @Param user body models.BlogPost true "Blog post details"
// @Success 200 "{\"message\": \"post updated successfully\", \"postID\": \"&lt;id&gt;\"}"
// @Failure 400 "{\"error\": \"Post ID is required\"}"
// @Failure 500 "{\"error\": \"Internal server error\"}"
// @Router /posts/{id} [put]
func (h *Handler) UpdatePost(c *fiber.Ctx) error <span class="cov8" title="1">{
        id := c.Params("id")
        if id == "" || len(id) != 36 </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{"error": "Post ID is required"})
        }</span>
        <span class="cov8" title="1">var reqBody models.BlogPost
        if err := c.BodyParser(&amp;reqBody); err != nil </span><span class="cov0" title="0">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{"error": "Invalid request body"})
        }</span>
        <span class="cov8" title="1">if err := h.repo.UpdatePost(c, id, &amp;reqBody); err != nil </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusInternalServerError).JSON(fiber.Map{"error": "Failed to update post"})
        }</span>
        <span class="cov8" title="1">return c.Status(fiber.StatusOK).JSON(fiber.Map{"message": "post updated successfully", "postID": id})</span>
}

// DeletePost deletes a blog post by ID
// @Summary Delete a blog post by ID
// @Description Deletes a blog post by its ID
// @Tags Public
// @Accept json
// @Produce json
// @Param id path string true "Post ID"
// @Success 200 "{\"message\": \"post deleted successfully\", \"postID\": \"&lt;id&gt;\"}"
// @Failure 400 "{\"error\": \"Post ID is required\"}"
// @Failure 500 "{\"error\": \"Internal server error\"}"
// @Router /posts/{id} [delete]
func (h *Handler) DeletePost(c *fiber.Ctx) error <span class="cov8" title="1">{
        id := c.Params("id")
        if id == "" || len(id) != 36 </span><span class="cov8" title="1">{
                return c.Status(fiber.StatusBadRequest).JSON(fiber.Map{"error": "Post ID is required"})
        }</span>
        <span class="cov8" title="1">if err := h.repo.DeletePost(c, id); err != nil </span><span class="cov0" title="0">{
                return c.Status(fiber.StatusInternalServerError).JSON(fiber.Map{"error": "Failed to delete post"})
        }</span>
        <span class="cov8" title="1">return c.Status(fiber.StatusOK).JSON(fiber.Map{"message": "post deleted successfully", "postID": id})</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">package main

import (
        "blog-apis/database"
        "blog-apis/handler"
        "blog-apis/models"
        "blog-apis/repository"
        "blog-apis/routes"
        "fmt"
        "log"

        _ "blog-apis/docs" // Import the generated swagger package

        "github.com/gofiber/fiber/v2"
        "github.com/gofiber/swagger"
        "github.com/kelseyhightower/envconfig"
)

// @title Fiber Example API
// @version 1.0
// @description This is a sample swagger for Fiber
// @termsOfService http://swagger.io/terms/
// @contact.name API Support
// @contact.email fiber@swagger.io
// @license.name Apache 2.0
// @license.url http://www.apache.org/licenses/LICENSE-2.0.html
// @host 127.0.0.1:8080
// @BasePath /api/v1
func main() <span class="cov0" title="0">{
        var config models.Config
        // Load environment variables into the config struct
        err := envconfig.Process("", &amp;config)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error processing environment variables: %v", err)
        }</span>
        // Initialize the database connection
        <span class="cov0" title="0">db, err := database.DBConnection(config)
        if err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error connecting to the database: %v", err)
        }</span>
        <span class="cov0" title="0">if err := database.DatabaseSchema(db); err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error initializing database schema: %v", err)
        }</span>
        <span class="cov0" title="0">repository := repository.NewRepository(db)
        handler := handler.NewHandler(repository)
        // Initialize the Fiber app
        app := fiber.New()
        routes.ApiRoutes(app, handler)
        app.Get("/swagger/*", swagger.HandlerDefault)
        defer database.CloseDB(db)
        // Start the Fiber app
        if err := app.Listen(fmt.Sprintf(":%s", config.BlogPort)); err != nil </span><span class="cov0" title="0">{
                log.Fatalf("Error starting the server: %v", err)
        }</span>
}
</pre>
		
		<pre class="file" id="file5" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: repository/interface.go

// Package mocks is a generated GoMock package.
package mocks

import (
        models "blog-apis/models"
        reflect "reflect"

        v2 "github.com/gofiber/fiber/v2"
        gomock "github.com/golang/mock/gomock"
)

// MockRepository is a mock of Repository interface.
type MockRepository struct {
        ctrl     *gomock.Controller
        recorder *MockRepositoryMockRecorder
}

// MockRepositoryMockRecorder is the mock recorder for MockRepository.
type MockRepositoryMockRecorder struct {
        mock *MockRepository
}

// NewMockRepository creates a new mock instance.
func NewMockRepository(ctrl *gomock.Controller) *MockRepository <span class="cov0" title="0">{
        mock := &amp;MockRepository{ctrl: ctrl}
        mock.recorder = &amp;MockRepositoryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRepository) EXPECT() *MockRepositoryMockRecorder <span class="cov0" title="0">{
        return m.recorder
}</span>

// CreatePost mocks base method.
func (m *MockRepository) CreatePost(c *v2.Ctx, post *models.BlogPost) error <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "CreatePost", c, post)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// CreatePost indicates an expected call of CreatePost.
func (mr *MockRepositoryMockRecorder) CreatePost(c, post interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "CreatePost", reflect.TypeOf((*MockRepository)(nil).CreatePost), c, post)
}</span>

// DeletePost mocks base method.
func (m *MockRepository) DeletePost(c *v2.Ctx, id string) error <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "DeletePost", c, id)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// DeletePost indicates an expected call of DeletePost.
func (mr *MockRepositoryMockRecorder) DeletePost(c, id interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "DeletePost", reflect.TypeOf((*MockRepository)(nil).DeletePost), c, id)
}</span>

// GetBlogPosts mocks base method.
func (m *MockRepository) GetBlogPosts(c *v2.Ctx) ([]models.BlogPost, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetBlogPosts", c)
        ret0, _ := ret[0].([]models.BlogPost)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetBlogPosts indicates an expected call of GetBlogPosts.
func (mr *MockRepositoryMockRecorder) GetBlogPosts(c interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetBlogPosts", reflect.TypeOf((*MockRepository)(nil).GetBlogPosts), c)
}</span>

// GetPost mocks base method.
func (m *MockRepository) GetPost(c *v2.Ctx, id string) (models.BlogPost, error) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "GetPost", c, id)
        ret0, _ := ret[0].(models.BlogPost)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// GetPost indicates an expected call of GetPost.
func (mr *MockRepositoryMockRecorder) GetPost(c, id interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "GetPost", reflect.TypeOf((*MockRepository)(nil).GetPost), c, id)
}</span>

// UpdatePost mocks base method.
func (m *MockRepository) UpdatePost(c *v2.Ctx, id string, post *models.BlogPost) error <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "UpdatePost", c, id, post)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// UpdatePost indicates an expected call of UpdatePost.
func (mr *MockRepositoryMockRecorder) UpdatePost(c, id, post interface{}) *gomock.Call <span class="cov0" title="0">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "UpdatePost", reflect.TypeOf((*MockRepository)(nil).UpdatePost), c, id, post)
}</span>
</pre>
		
		<pre class="file" id="file6" style="display: none">package repository

import (
        "blog-apis/models"
        "database/sql"
        "time"

        "github.com/gofiber/fiber/v2"
        "github.com/google/uuid"
)

type repo struct {
        db *sql.DB
}

func NewRepository(db *sql.DB) *repo <span class="cov0" title="0">{
        return &amp;repo{db: db}
}</span>
func (r *repo) GetBlogPosts(c *fiber.Ctx) ([]models.BlogPost, error) <span class="cov0" title="0">{
        query := `SELECT id, title, body, description, created_at, updated_at FROM blog_posts`
        rows, err := r.db.Query(query)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">defer rows.Close()
        var posts []models.BlogPost
        for rows.Next() </span><span class="cov0" title="0">{
                var post models.BlogPost
                err := rows.Scan(&amp;post.ID, &amp;post.Title, &amp;post.Body, &amp;post.Description, &amp;post.CreatedAt, &amp;post.UpdatedAt)
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov0" title="0">posts = append(posts, post)</span>
        }
        <span class="cov0" title="0">return posts, nil</span>
}

func (r *repo) CreatePost(c *fiber.Ctx, post *models.BlogPost) error <span class="cov0" title="0">{
        post.ID = uuid.New()
        post.CreatedAt = time.Now()
        post.UpdatedAt = time.Now()

        query := `INSERT INTO blog_posts (id, title, body, description, created_at, updated_at) VALUES ($1, $2, $3, $4, $5, $6)`
        _, err := r.db.Exec(query, post.ID, post.Title, post.Body, post.Description, post.CreatedAt, post.UpdatedAt)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
func (r *repo) GetPost(c *fiber.Ctx, id string) (models.BlogPost, error) <span class="cov0" title="0">{
        query := `SELECT id, title, body, description, created_at, updated_at FROM blog_posts WHERE id = $1`
        row := r.db.QueryRow(query, id)

        var post models.BlogPost
        err := row.Scan(&amp;post.ID, &amp;post.Title, &amp;post.Body, &amp;post.Description, &amp;post.CreatedAt, &amp;post.UpdatedAt)
        if err != nil </span><span class="cov0" title="0">{
                return models.BlogPost{}, err
        }</span>
        <span class="cov0" title="0">return post, nil</span>
}
func (r *repo) UpdatePost(c *fiber.Ctx, id string, post *models.BlogPost) error <span class="cov0" title="0">{
        post.UpdatedAt = time.Now()

        query := `UPDATE blog_posts SET title = $1, body = $2, description = $3, updated_at = $4 WHERE id = $5`
        _, err := r.db.Exec(query, post.Title, post.Body, post.Description, post.UpdatedAt, id)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
func (r *repo) DeletePost(c *fiber.Ctx, id string) error <span class="cov0" title="0">{
        query := `DELETE FROM blog_posts WHERE id = $1`
        _, err := r.db.Exec(query, id)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package routes

import (
        "blog-apis/handler"

        "github.com/gofiber/fiber/v2"
)

func ApiRoutes(r *fiber.App, h *handler.Handler) <span class="cov0" title="0">{
        router := r.Group("/api/v1")
        router.Post("/posts", h.CreatePost)
        router.Get("/posts", h.GetPosts)
        router.Get("/posts/:id", h.GetPost)
        router.Put("/posts/:id", h.UpdatePost)
        router.Delete("/posts/:id", h.DeletePost)
}</span>
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
